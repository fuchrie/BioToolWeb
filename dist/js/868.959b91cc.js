"use strict";(self["webpackChunktry"]=self["webpackChunktry"]||[]).push([[868],{635:function(e,t,r){r(4114);var o=r(4373),s=r(3948),a=r(6874);const n=o.A.create({baseURL:"http://202.195.187.9:8000"});n.interceptors.request.use((e=>{const t=localStorage.getItem("token");if(t){if((0,s.D)(t))return localStorage.removeItem("token"),a.A.push("/login"),Promise.reject(new Error("Token expired"));e.headers.Authorization=`Bearer ${t}`}return e}),(e=>Promise.reject(e))),n.interceptors.response.use((e=>e),(e=>(e.response&&401===e.response.status&&(localStorage.removeItem("token"),a.A.push("/login")),Promise.reject(e)))),t.A=n},7868:function(e,t,r){r.r(t),r.d(t,{default:function(){return L}});var o=r(6768);const s={class:"container"};function a(e,t,r,a,n,u){const i=(0,o.g2)("login",!0);return(0,o.uX)(),(0,o.CE)("div",s,[(0,o.bF)(i)])}var n=r(5130);const u={class:"login-container"},i={class:"form-group"},l={class:"form-group"};function c(e,t,r,s,a,c){const m=(0,o.g2)("router-link");return(0,o.uX)(),(0,o.CE)("div",u,[(0,o.Lk)("form",{class:"login-form",onSubmit:t[2]||(t[2]=(0,n.D$)(((...e)=>s.submitForm&&s.submitForm(...e)),["prevent"]))},[t[6]||(t[6]=(0,o.Lk)("h2",null,"用户登录",-1)),(0,o.Lk)("div",i,[t[3]||(t[3]=(0,o.Lk)("label",{for:"username"},"用户名",-1)),(0,o.bo)((0,o.Lk)("input",{type:"text",id:"username","onUpdate:modelValue":t[0]||(t[0]=e=>s.formData.username=e),placeholder:"请输入用户名",required:""},null,512),[[n.Jo,s.formData.username]])]),(0,o.Lk)("div",l,[t[4]||(t[4]=(0,o.Lk)("label",{for:"password"},"密码",-1)),(0,o.bo)((0,o.Lk)("input",{type:"password",id:"password","onUpdate:modelValue":t[1]||(t[1]=e=>s.formData.password=e),placeholder:"请输入密码",required:""},null,512),[[n.Jo,s.formData.password]])]),t[7]||(t[7]=(0,o.Lk)("button",{type:"submit",class:"submit-btn"},"Login",-1)),(0,o.bF)(m,{to:"/regist"},{default:(0,o.k6)((()=>t[5]||(t[5]=[(0,o.Lk)("button",{type:"submit",class:"submit-btn"},"Regist",-1)]))),_:1})],32)])}r(4114);var m=r(144),p=r(1387),d=r(635),f={name:"login",setup(){const e=(0,p.rd)(),t=(0,m.KR)({username:"",password:""}),r=async()=>{try{const r=await d.A.post("http://202.195.187.9:8000/api/login/",t.value);r.data.success?(alert("登录成功！"),localStorage.setItem("token",r.data.token),e.push("/")):alert("登录失败："+r.data.message)}catch(r){console.error("请求失败：",r),alert("请求失败，请检查网络或服务器状态。")}};return{formData:t,submitForm:r}}},g=r(1241);const k=(0,g.A)(f,[["render",c],["__scopeId","data-v-302a1392"]]);var b=k,v={name:"login_view",components:{login:b}};const h=(0,g.A)(v,[["render",a]]);var L=h}}]);
//# sourceMappingURL=868.959b91cc.js.map