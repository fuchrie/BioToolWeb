{"version":3,"file":"js/373.e29945ec.js","mappings":"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","sources":["webpack://try/./src/utils/axios.js","webpack://try/./src/components/FileCheck.vue","webpack://try/./src/components/FileCheck.vue?5d87","webpack://try/./src/views/user.vue","webpack://try/./src/components/FileUpload.vue","webpack://try/./src/components/FileUpload.vue?4ef7","webpack://try/./src/views/user.vue?5039"],"sourcesContent":["import axios from 'axios';\r\nimport { isJWTExpired } from './jwt';\r\nimport router from '@/router'; // 引入 Vue Router\r\n\r\nconst instance = axios.create({\r\n    baseURL: 'http://202.195.187.9:8000', // 你的 API 地址\r\n});\r\n\r\n// 请求拦截器\r\ninstance.interceptors.request.use(\r\n    (config) => {\r\n        const token = localStorage.getItem('token');\r\n        if (token) {\r\n            if (isJWTExpired(token)) {\r\n                // 如果 JWT 过期，跳转到登录页面\r\n                localStorage.removeItem('token'); // 清除过期令牌\r\n                router.push('/login');\r\n                return Promise.reject(new Error('Token expired'));\r\n            }\r\n            config.headers.Authorization = `Bearer ${token}`;\r\n        }\r\n        return config;\r\n    },\r\n    (error) => {\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\n// 响应拦截器\r\ninstance.interceptors.response.use(\r\n    (response) => {\r\n        return response;\r\n    },\r\n    (error) => {\r\n        if (error.response && error.response.status === 401) {\r\n            // 如果后端返回 401（未授权），跳转到登录页面\r\n            localStorage.removeItem('token'); // 清除过期令牌\r\n            router.push('/login');\r\n        }\r\n        return Promise.reject(error);\r\n    }\r\n);\r\n\r\nexport default instance;","<template>\r\n  <div class=\"directory-tree\">\r\n      <el-scrollbar>\r\n      <el-tree\r\n        ref=\"tree\"\r\n        :data=\"treeData\"\r\n        :props=\"defaultProps\"\r\n        :load=\"loadNode\"\r\n        lazy\r\n        node-key=\"path\"\r\n        show-checkbox\r\n        @check-change=\"handleCheckChange\"\r\n        @node-click=\"handleNodeClick\"\r\n      >\r\n        <template #default=\"{ node, data }\">\r\n          <span>\r\n            <i :class=\"data.type === 'directory' ? 'el-icon-folder' : 'el-icon-document'\"></i>\r\n            {{ node.label }}\r\n          </span>\r\n          <el-pagination\r\n            v-if=\"data.type === 'directory' && data.total > 10\"\r\n            small\r\n            layout=\"prev, pager, next\"\r\n            :total=\"data.total\"\r\n            :page-size=\"10\"\r\n            :current-page=\"data.page\"\r\n            @current-change=\"(newPage) => handlePageChange(node, newPage)\"\r\n          />\r\n        </template>\r\n      </el-tree>\r\n    </el-scrollbar>\r\n  </div>\r\n</template>\r\n<script>\r\nimport { onMounted, ref } from 'vue';\r\nimport axios from '@/utils/axios';\r\nexport default{\r\n    name:'filecheck',\r\n    emits: ['selected-files', 'selected-paths'],\r\n    setup(props, { emit }){\r\n        const treeData =ref([]);\r\n        const tree = ref(null); // 定义 tree 引用\r\n        const defaultProps = ref({\r\n            label: 'name', // 使用 name 字段作为节点标签\r\n            isLeaf: (data) => data.type === 'file', // 文件是叶子节点\r\n        });\r\n        const token = localStorage.getItem('token');\r\n        const headers = {\r\n          Authorization: `Bearer ${token}`,\r\n        };\r\n        onMounted(async () => {\r\n          try {\r\n            const response = await loadNodeRoot(); // 假设您定义了一个 loadNodeRoot 函数来加载根节点\r\n            treeData.value = [{ label: 'Root', path: '', children: response.data.children || [] }];\r\n          } catch (error) {\r\n            console.error('Error loading root node:', error);\r\n          }\r\n        });\r\n        const loadNodeRoot = async () => {\r\n          const path = node.level === 0 ? '' : node.data.path;\r\n          const response = await axios.get('http://202.195.187.9:8000/api/list-directory/', {\r\n            headers,\r\n          });\r\n          return response;\r\n        };\r\n        const loadNode = async (node, resolve) => {\r\n          try {\r\n              let response;\r\n              const path = node.level === 0 ? '' : node.data.path; // 根节点使用默认路径 '/'\r\n              response = await axios.get('http://202.195.187.9:8000/api/list-directory/', {\r\n                  headers,\r\n                  params: { path }, // 传递路径参数\r\n              });\r\n              resolve(response.data.children || []);\r\n          } catch (error) {\r\n              console.error('Error loading node:', error);\r\n              resolve([]); // 返回空数组，避免页面崩溃\r\n          }\r\n        };\r\n        const handleNodeClick = (data) => {\r\n            console.log('Clicked node:', data);\r\n        };\r\n        const handleCheckChange = () => {\r\n          if (tree.value) {\r\n            const selectedNodes = tree.value.getCheckedNodes(); // 通过 tree.value 访问方法\r\n            const selectedFiles = selectedNodes\r\n              .filter((node) => node.type === 'file')\r\n              .map((node) => node.name);\r\n            const selectedPaths = selectedNodes\r\n              .filter((node) => node.type === 'file')\r\n              .map((node) => node.path); // 获取文件路径\r\n\r\n            emit('selected-paths', selectedPaths); // 传递文件路径\r\n            emit('selected-files', selectedFiles); // 将选中的文件名传递给父组件\r\n            \r\n          }\r\n        };\r\n        return{\r\n            treeData,\r\n            defaultProps,\r\n            loadNode,\r\n            handleNodeClick,\r\n            handleCheckChange,\r\n            tree,\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.directory-tree {\r\n  overflow-y: auto;\r\n  background: #f8f9fa;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);\r\n}\r\n\r\n.custom-tree {\r\n  --el-tree-node-hover-bg-color: #f0f7ff;\r\n  --el-tree-text-color: #2c3e50;\r\n  --el-tree-expand-icon-color: #909399;\r\n}\r\n\r\n:deep(.el-tree-node__content) {\r\n  height: 40px;\r\n  transition: all 0.3s;\r\n  margin: 2px 0;\r\n}\r\n\r\n:deep(.el-tree-node__content) i[class^=\"el-icon\"] {\r\n  font-size: 18px;\r\n  margin-right: 8px;\r\n  vertical-align: middle;\r\n}\r\n\r\n:deep(.el-icon-folder) {\r\n  color: #409eff;\r\n}\r\n\r\n:deep(.el-icon-document) {\r\n  color: #909399;\r\n}\r\n\r\n:deep(.el-tree-node:focus > .el-tree-node__content),\r\n:deep(.el-tree-node.is-current > .el-tree-node__content) {\r\n  background-color: #e6f7ff !important;\r\n  border-radius: 4px;\r\n}\r\n\r\n:deep(.el-tree-node__children) {\r\n  position: relative;\r\n  padding-left: 16px;\r\n}\r\n\r\n:deep(.el-tree-node__children::before) {\r\n  content: \"\";\r\n  position: absolute;\r\n  left: 0;\r\n  top: 0;\r\n  width: 1px;\r\n  height: 100%;\r\n  background: #e0e0e0;\r\n}\r\n\r\n:deep(.el-tree-node__loading-icon) {\r\n  animation: spin 1s linear infinite;\r\n  color: #409eff;\r\n}\r\n\r\n@keyframes spin {\r\n  from { transform: rotate(0deg); }\r\n  to { transform: rotate(360deg); }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .directory-tree {\r\n    padding: 10px;\r\n  }\r\n  \r\n  :deep(.el-tree-node__content) {\r\n    height: 36px;\r\n  }\r\n  \r\n  :deep(.el-tree-node__content) i[class^=\"el-icon\"] {\r\n    font-size: 16px;\r\n  }\r\n}\r\n</style>","import { render } from \"./FileCheck.vue?vue&type=template&id=f66dd0f0&scoped=true\"\nimport script from \"./FileCheck.vue?vue&type=script&lang=js\"\nexport * from \"./FileCheck.vue?vue&type=script&lang=js\"\n\nimport \"./FileCheck.vue?vue&type=style&index=0&id=f66dd0f0&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-f66dd0f0\"]])\n\nexport default __exports__","<template>\r\n    <bar/>\r\n    <!-- <UserInfo/> -->\r\n     <div class=\"container\">\r\n        <div class=\"upload\">\r\n            <h3>上传文件</h3>\r\n            <FileUpload/>\r\n        </div>\r\n        <div class=\"check\">\r\n            <h3>选择文件/文件夹</h3>\r\n            <FlieCheck class=\"select\"@selected-paths=\"handleSelectedPaths\"/>\r\n            <el-button class=\"custom-download-button\" @click=\"handleDownload\">\r\n            <i class=\"el-icon-download\"></i>\r\n                下载选中文件\r\n            </el-button>\r\n        </div>\r\n     </div>\r\n    \r\n    \r\n</template>\r\n<script>\r\n// import UserInfo from '@/components/UserInfo.vue';\r\nimport FileUpload from '@/components/FileUpload.vue';\r\nimport FlieCheck from '@/components/FileCheck.vue';\r\nimport bar from '@/components/Tool_Navigation.vue';\r\nimport { onBeforeMount } from 'vue';\r\nimport { useRouter } from 'vue-router';\r\nimport { isJWTExpired } from '@/utils/jwt';\r\nimport axios from '@/utils/axios';\r\nimport { ref } from 'vue';\r\nexport default{\r\n    name:'user',\r\n    components:{\r\n        bar,\r\n        FlieCheck,\r\n        FileUpload,\r\n    },\r\n    setup(){\r\n        const selectedPaths = ref([]); // 存储选中的文件路径\r\n        const router = useRouter();\r\n        // 从 localStorage 中获取 JWT 令牌\r\n        const token = localStorage.getItem(\"token\");\r\n        console.log(\"Token:\", token);\r\n        onBeforeMount(() => {\r\n            // 判断 token 是否存在且有效\r\n            if (isJWTExpired(token)) {\r\n                localStorage.removeItem('token'); // 清除过期令牌\r\n                console.log(\"Redirecting to login\");\r\n                router.push('/login');\r\n            }\r\n        });\r\n        // 监听子组件传递的选中文件路径\r\n        const handleSelectedPaths = (paths) => {\r\n            selectedPaths.value = paths;\r\n            console.log(paths)\r\n        };\r\n        const handleDownload = async () => {\r\n        if (selectedPaths.value.length === 0) {\r\n            alert('请选择至少一个文件进行下载');\r\n            return;\r\n        }\r\n\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const headers = {\r\n            Authorization: `Bearer ${token}`,\r\n            };\r\n\r\n            const response = await axios.post(\r\n            'http://202.195.187.9:8000/api/download-file/',\r\n            { file_paths: selectedPaths.value },\r\n            { headers, responseType: 'blob' } // 设置 responseType 为 'blob' 以处理文件下载\r\n            );\r\n\r\n            // 创建一个链接元素，用于触发文件下载\r\n            const url = window.URL.createObjectURL(new Blob([response.data]));\r\n            const link = document.createElement('a');\r\n            link.href = url;\r\n            link.setAttribute('download', 'files.zip'); // 设置下载文件的名称\r\n            document.body.appendChild(link);\r\n            link.click();\r\n            document.body.removeChild(link);\r\n        } catch (error) {\r\n            console.error('Error downloading files:', error);\r\n            alert('文件下载失败');\r\n        }\r\n        };\r\n        return {\r\n            handleSelectedPaths,\r\n            handleDownload,\r\n        };\r\n    }\r\n}\r\n</script>\r\n<style>\r\n.container{\r\n    padding-top: 150px;\r\n    align-items: flex-start;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    gap: 20px;\r\n}\r\n.check{\r\n    height: 380px;\r\n    margin: auto;\r\n    flex: 1;\r\n    max-width: 40%;\r\n    border: 1px solid #b8b1b1;\r\n    border-radius: 8px;\r\n    padding: 16px;\r\n    box-sizing: border-box;\r\n}\r\n.upload{\r\n    height: 380px;\r\n    margin: auto;\r\n    padding: 40px;\r\n    flex: 1;\r\n    max-width: 40%;\r\n    border: 1px solid #b8b1b1;\r\n    border-radius: 8px;\r\n    padding: 16px;\r\n    box-sizing: border-box;\r\n}\r\n/* 自定义按钮样式 */\r\n.custom-download-button {\r\n  background-color: #409eff; /* 背景颜色 */\r\n  color: white; /* 文字颜色 */\r\n  border: none; /* 去掉边框 */\r\n  padding: 10px 20px; /* 内边距 */\r\n  font-size: 14px; /* 字体大小 */\r\n  transition: background-color 0.3s ease; /* 过渡效果 */\r\n}\r\n\r\n.custom-download-button:hover {\r\n  background-color: #66b1ff; /* 鼠标悬停时的背景颜色 */\r\n}\r\n\r\n.custom-download-button:active {\r\n  background-color: #3a8ee6; /* 按钮按下时的背景颜色 */\r\n}\r\n\r\n.custom-download-button i {\r\n  margin-right: 8px; /* 图标与文字的间距 */\r\n}\r\n.select{\r\n  border-radius: 5px;\r\n  height: 190px;\r\n  display: flex;\r\n  flex-direction: column;\r\n    overflow-y: auto;\r\n}\r\n</style>","<template>\r\n    <div class=\"upload-container\">\r\n        <el-upload\r\n            ref=\"uploadRef\"\r\n            class=\"upload-demo\"\r\n            drag\r\n            action=\"http://202.195.187.9:8000/api/upload/\"\r\n            multiple\r\n            :headers=\"headers\"\r\n            :on-preview=\"handlePreview\"\r\n            :on-remove=\"handleRemove\"\r\n            :before-upload=\"beforeUpload\"\r\n            :file-list=\"fileList\"\r\n            :auto-upload=\"false\"\r\n            >\r\n            <el-icon class=\"icon\"><upload-filled /></el-icon>\r\n            <div>\r\n                拖动或 <em>点击上传</em>\r\n            </div>\r\n        </el-upload>\r\n        <el-button class=\"submitbutton\" type=\"primary\" @click=\"submitUpload\">上传文件</el-button>\r\n    </div>\r\n</template>\r\n<script>\r\nimport { ref } from 'vue';\r\nimport { UploadFilled } from '@element-plus/icons-vue';\r\nimport { ElMessage } from 'element-plus';\r\nexport default{\r\n    name:'fileupload',\r\n    components: {\r\n        UploadFilled\r\n    },\r\n    setup(){\r\n        const fileList = ref([]);\r\n        // 从 localStorage 中获取 JWT 令牌\r\n        const token = localStorage.getItem(\"token\");\r\n        const headers = ref({\r\n            Authorization: `Bearer ${token}`,  // 将令牌附加到请求头\r\n        });\r\n        const handleRemove = (file, fileList) => {\r\n            console.log(file, fileList);\r\n        };\r\n\r\n        const handlePreview = (file) => {\r\n            console.log(file);\r\n        };\r\n\r\n        const beforeUpload = (file) => {\r\n            const isLt10GB = file.size / (1024 * 1024 * 1024) < 10;\r\n            if (!isLt10GB) {\r\n                ElMessage.error('大小不能超过10GB!');\r\n                return false; // 阻止上传\r\n            }\r\n            return true; // 允许上传\r\n        };\r\n        const uploadRef = ref(null);\r\n        const submitUpload = () => {\r\n        if (uploadRef.value) {\r\n            uploadRef.value.submit(); // 调用 el-upload 的 submit 方法\r\n        }\r\n        };\r\n        return {\r\n            fileList,\r\n            handleRemove,\r\n            handlePreview,\r\n            beforeUpload,\r\n            headers,\r\n            submitUpload,\r\n            uploadRef,\r\n        };\r\n    }\r\n}\r\n</script>\r\n<style scoped>\r\n.upload-container {\r\n  position: relative; /* 设置容器为相对定位 */\r\n  width: 100%;\r\n  max-width: 600px; /* 限制最大宽度 */\r\n  margin: 0 auto; /* 居中 */\r\n}\r\n.upload-demo {\r\n  padding: 20px; \r\n  background-color: #ffffff; \r\n  border-radius: 8px; \r\n  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1); \r\n  transition: box-shadow 0.3s ease; \r\n}\r\n\r\n.upload-demo:hover {\r\n  box-shadow: 0 6px 16px rgba(0, 0, 0, 0.15); \r\n}\r\n\r\n.icon {\r\n  font-size: 24px;\r\n  margin-bottom: 10px;\r\n}\r\n.submitbutton{\r\n  position: absolute;\r\n  top: 110%;\r\n  left: 42%;\r\n}\r\n</style>","import { render } from \"./FileUpload.vue?vue&type=template&id=7da8ebc5&scoped=true\"\nimport script from \"./FileUpload.vue?vue&type=script&lang=js\"\nexport * from \"./FileUpload.vue?vue&type=script&lang=js\"\n\nimport \"./FileUpload.vue?vue&type=style&index=0&id=7da8ebc5&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-7da8ebc5\"]])\n\nexport default __exports__","import { render } from \"./user.vue?vue&type=template&id=61a3984b\"\nimport script from \"./user.vue?vue&type=script&lang=js\"\nexport * from \"./user.vue?vue&type=script&lang=js\"\n\nimport \"./user.vue?vue&type=style&index=0&id=61a3984b&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["instance","axios","create","baseURL","interceptors","request","use","config","token","localStorage","getItem","isJWTExpired","removeItem","router","push","Promise","reject","Error","headers","Authorization","error","response","status","class","_createElementBlock","_hoisted_1","_createVNode","_component_el_scrollbar","default","_withCtx","_component_el_tree","ref","data","$setup","treeData","props","defaultProps","load","loadNode","lazy","onCheckChange","handleCheckChange","onNodeClick","handleNodeClick","node","_createElementVNode","_normalizeClass","type","_createTextVNode","_toDisplayString","label","total","_createBlock","_component_el_pagination","key","small","layout","page","onCurrentChange","newPage","_ctx","handlePageChange","_createCommentVNode","_","name","emits","setup","emit","tree","isLeaf","onMounted","async","loadNodeRoot","value","path","children","console","level","get","resolve","params","log","selectedNodes","getCheckedNodes","selectedFiles","filter","map","selectedPaths","__exports__","render","_Fragment","_component_bar","_hoisted_2","_component_FileUpload","_hoisted_3","_component_FlieCheck","onSelectedPaths","handleSelectedPaths","_component_el_button","onClick","handleDownload","_cache","_component_el_upload","drag","action","multiple","handlePreview","handleRemove","beforeUpload","fileList","_component_el_icon","_component_upload_filled","submitUpload","components","UploadFilled","file","isLt10GB","size","ElMessage","uploadRef","submit","bar","FlieCheck","FileUpload","useRouter","onBeforeMount","paths","length","post","file_paths","responseType","url","window","URL","createObjectURL","Blob","link","document","createElement","href","setAttribute","body","appendChild","click","removeChild","alert"],"sourceRoot":""}